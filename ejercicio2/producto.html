<!DOCTYPE html>
<html>
	<head>
		<title>Productos</title>
		<meta charset="utf-8">
		<link rel="stylesheet" href="css/comun.css"> 
		<link rel="stylesheet" href="css/producto.css"> 
		<script src="js/producto.js"></script>
		<script src="js/productoUtil.js"></script>
		<script>
			var productoUtil = new ProductoUtil();

			var initProductoUtil = function() {
				productoUtil.agregar(new Producto("TV", 500));
				productoUtil.agregar(new Producto("CÃ¡mara", 200));
				productoUtil.agregar(new Producto("DVD", 300));
			};

			var imprimirTabla = function() { // TODO Refactorizar con JSRender
				var tbody = document.getElementById("tbodyTablaProductos");
				var productos = productoUtil.obtenerTodos();
				var html = "";

				for (var i in productos) {
					var p = productos[i];

					html += "<tr>";
					html += "<td>" + p.getId() + "</td>";
					html += "<td>" + p.getNombre() + "</td>";
					html += "<td>" + p.getPrecio() + "</td>";
					html += "<td><a href='#'>mostrar</a></td>";
					html += "<td><a href='#'>eliminar</a></td>";
					html += "</tr>";
				}
				
				tbody.innerHTML = html;
			};

			var agregar = function() {
				var nombre = document.getElementById("nombre").value;
				var precio = document.getElementById("precio").value;

				if (nombre && precio) { // TODO Mejorar validaciones
					productoUtil.agregar(new Producto(nombre, precio));
					imprimirTabla();
				}
			};

			var init = function() {
				initProductoUtil();
				imprimirTabla();
			};
		</script>
	</head>
	<body onload="init()">
		<h1>Productos</h1>
		<table id="tabla-form" class="tabla-centrada">
			<tr>
				<td>Nombre</td>
				<td><input type="text" name="nombre" id="nombre"></td>
			</tr>
			<tr>
				<td>Precio</td>
				<td><input type="number" name="precio" id="precio"></td>
			</tr>
			<tr>
				<td colspan="2">
					<input type="button" value="Modificar">
					<input type="button" value="Agregar" onclick="agregar()">
				</td>
			</tr>
		</table>

		<hr>

		<table id="tabla-productos" class="tabla-centrada tabla-datos">
			<thead>
				<tr>
					<th>Id</th>
					<th>Nombre</th>
					<th>Precio</th>
					<th>Mostrar</th>
					<th>Eliminar</th>
				</tr>
			</thead>
			<tbody id="tbodyTablaProductos">
			</tbody>
		</table>
	</body>
</html>
